{% extends 'base.html' %}
{% load i18n %} 
{% load humanize %}

{%block content %}
	<p>
		{% trans 'Welcome back, '%}
		{% if user.firstname %}
			{{ user.firstname %}!
		{% else %}
			{{ user.username }}!
		{% endif%}
	</p>

	{% if user.is_authenticated and not user.get_profile.mail_verified %}
		<p><b>Your email address is unverified</b>. Therefore, we won't be able to send you any mails, <i>including</i> your diary mails. Please check your inbox for the verification link.</p>
	{% endif %}

	<h2>{% trans 'Recent posts' %}</h2>
	<!-- <a href='/post/{{ post.id }}/'> -->
	<table class="post-list border alternate">
		<tbody>
			{% for post in posts %}
					<tr data-id='{{ post.id }}' onclick="window.location.href = '/post/{{ post.id }}';">
						<td style="width: 45px; text-align: center;">
							<a href='/post/{{ post.id }}'><strong>#{{ post.get_user_post_id }}</strong></a>
						</td>
						<!--<td>
							<i class="icon-edit"></i>
						</td>-->
						<td style="width: 250px;">
							<!-- We heard you like tables … -->
							<table>
								<tbody>
									<tr>
										<td><a href='/post/{{ post.id }}'><strong>{{ post.date|naturalday }}</strong></a></td>
									</tr>
									<tr>
										<td>
											<a href='/post/{{ post.id }}'><small style='font-size: .8em; font-weight: 300;'>Posted {{ post.created_at }}</small></a>
										</td>
									</tr>
								</tbody>
							</table>
						</td>
						<td>
							<a href='/post/{{ post.id }}'><small class="text-teaser">{{ post.text|truncatechars:140 }}</small></a>
						</td>
					</tr>
			{% empty %}
				{% trans 'No posts to show – Try <a href="/post/new/">adding your first post</a>!'%}
			{% endfor %}
		</tbody>
	</table>

	{% if randompost %}
		<h2>{% trans 'Random public post' %}</h2>
		<p>{{ randompost.text|linebreaks }}</p>
	{% endif %}
{% endblock %}